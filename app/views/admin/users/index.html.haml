- content_for :head do
  = javascript_include_tag "jquery.quicksearch" 
  :javascript
    $(document).ready(function() {
       $('input#search').quicksearch('table tbody tr');
       $('input#search').bind('keypress', function(e) {
           if ( e.which == 13 ) return false;
       });
    });

.block
  .block_head
    .bheadl
    .bheadr
    %h2 Users
    %ul
      %li.nobg        
        = link_to image_tag('/images/add.png', :alt => 'Add', :style=>'vertical-align: text-bottom') + ' Add New User', new_admin_user_path, :style => 'line-height:5em'
  .block_content
    %p 
      %em Click the user's login to edit their profile
    - if @users.empty?
      .message.warning{:style => "display: block; "}
        %p No Users currently in the system
    - else
      - if !notice.nil?
        .message.success{:style=> 'display:block;'}
          %p 
            = notice
      %div{:style => "float:left;clear:right;"}
        %form
          Search:
          %input{:type => "text", :id => "search", :class => 'text medium'}
      %div{:style => "float:right;clear:left"}
        - if params[:view] == nil
          %em Viewing only active users
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          =link_to "View All Users", admin_users_path(:view => "all")
        - else
          =link_to "View Active Users Only", admin_users_path
    
      %table.sortable{:cellpadding => "0", :cellspacing => "0", :width => "100%"}
        %thead
          %tr
            %th.header{:style => "cursor: pointer; "} Login
            %th.header{:style => "cursor: pointer; "} Name
            %th.header{:style => "cursor: pointer; "} Email
            %th.header{:style => "cursor: pointer; "} Last Login
            %th.header{:style => "cursor: pointerx; "} Active?
            %td.header{:style => "cursor: pointerx; "} Delete
        %tbody
          - @users.each do |user| 
            %tr{ :class => cycle('even', 'odd') }
              %td  
                =link_to user.login, edit_admin_user_path(user)
              %td= user.name
              %td= user.email
              %td= user.last_sign_in_at.nil? ? 'N/A' : time_ago_in_words(user.current_sign_in_at) + ' ago'
              %td= user.active? ? 'Yes' : 'No'
              %td
                - if !user.admin?
                  = link_to image_tag('/images/delete.png', :alt=>'Delete'), admin_user_path(user), :confirm => "Are you sure you want to delete this user?\n\nWARNING: THIS CANNOT BE UNDONE!!!!", :method => :delete
			                 