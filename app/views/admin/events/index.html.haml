- content_for :head do
  = javascript_include_tag "jquery.quicksearch" 
  = javascript_include_tag "jquery.tablesorter.min" 
  :javascript
    $(document).ready(function() {
       $('input#search').quicksearch('table tbody tr');
       $('input#search').bind('keypress', function(e) {
           if ( e.which == 13 ) return false;
       });
       $("#eventTable").tablesorter(); 
    });

.block
  .block_head
    .bheadl
    .bheadr
    %h2 Events
    %ul
      %li.nobg        
        = link_to image_tag('/images/add.png', :alt => 'Add', :style=>'vertical-align: text-bottom') + ' Add New Event', new_admin_event_path, :style => 'line-height:5em'
  .block_content
    %p 
      %em Click the event to edit it's information
    - if @events.empty?
      .message.warning{:style => "display: block; "}
        %p No Events currently in the system
    - else
      - if !notice.nil?
        .message.success{:style=> 'display:block;'}
          %p 
            = notice
      %form
        Filter:
        %input{:type => "text", :id => "search", :class => 'text medium'}
      %br/
      %table#eventTable.sortable.tablesorter{:cellpadding => "0", :cellspacing => "0", :width => "100%"}
        %thead
          %tr
            %th.header{:style => "cursor: pointer; "} Name
            %th.header{:style => "cursor: pointer; "} Date/Time
            %th.header{:style => "cursor: pointer; "} Category
            %th.header{:style => "cursor: pointer; "} Members Only
            %td.header{:style => "cursor: pointerx; "} Delete
        %tbody
          - @events.each do |event| 
            %tr{ :class => cycle('even', 'odd') }
              %td  
                =link_to event.name, edit_admin_event_path(event)
              %td
                = event.start_at.strftime("%a, %b %e, %Y")
                - if !event.all_day
                  = event.start_at.strftime(" at %l:%M %p")
              %td= event.name
              %td= event.members_only? ? 'Yes' : 'No'
              %td
                = link_to image_tag('/images/delete.png', :alt=>'Delete'), admin_event_path(event), :confirm => "Are you sure you want to delete this event?\n\nWARNING: THIS CANNOT BE UNDONE!!!!", :method => :delete
     